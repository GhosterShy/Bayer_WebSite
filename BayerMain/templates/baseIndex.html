{% load static %}
{% csrf_token %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="{% static 'htmx.min.js' %}" integrity="sha384-0895/pl2MU10Hqc6jd4RvrthNlDiE9U1tWmX7WRESftEDRosgxNsQG/Ze9YMRzHq" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'bootstrap-5.3.3-dist/css/bootstrap.css' %}">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="{% static 'cart.css' %}">
    <title>Bayer</title>
</head>
<body>
    <nav class="navbar navbar-light shadow-sm fixed-top">
        <div class="container">
            <a class="navbar-brand" href="{% url 'Home' %}">BAYER</a>
            <div class="search-input">
                <a href="" class="position-absolute btn"><i class="bi bi-search"></i></a>
                <input type="text" class="form-control" placeholder="Поиск">
            </div>
            <div class="menu d-flex justify-content-between gap-3">

                 {% if user.is_anonymous   %}
                <a href="{% url 'Registration' %}">
                     <button class="btn btn-primary"><i class="bi bi-person">Аккаунт</i></button>
                </a>

                {% else %}
                <a href="">

                    <button class="btn btn-primary"><i class="bi bi-person">{{ user.username }}</i></button>
                </a>

                 {% endif %}

                <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling">
                    <i class="bi bi-cart2"></i> Корзина</button>
            </div>
        </div>
    </nav>








    <div class="offcanvas offcanvas-end" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title d-flex" id="offcanvasScrollingLabel">Корзина <span class="count"> {{ cartItems.count }}</span></h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body" id="cart-products">
            <ul class="products" >

                {% if not cartItems%}
                        <h4 style="text-align: center;padding-top: 50px;color: #69cc3e">Корзина пустая</h4>
                    {% endif %}

            {% for cartItem in cartItems %}
                <li class="product">
                    <a href="#" class="product-link">
                        <span class="product-image">
                            <img src="{{ MEDIA_URL }}{{ cartItem.product.image.url }}">
                        </span>
                        <span class="product-details">
                            <h3>{{ cartItem.product.name }}</h3>
                            <span class="qty-price">
                                <span class="qte">
                                     <button hx-get="{% url 'minus_card' cartItem.product.id %}" hx-target="#cart-products" type="button" class="minus-button" id="minus-button-1">-</button>
                                    <span style="padding-left: 10px;padding-right: 10px;color: white">{{ cartItem.quantity }}</span>
                                    <button hx-get="{% url 'plus_card' cartItem.product.id %}" hx-target="#cart-products" type="button" class="plus-button">+</button>
                                    <span style="padding-left: 10px;padding-right: 10px;color: white">{{ cartItem.product.price }}₸</span>
                                </span>
                                <span style="font-size: 20px;" class="price">{{ cartItem.sumtotal }}₸</span>
                            </span>
                        </span>
                    </a>
                    <a style="color: black" class="remove-button" href="{% url 'delete_card' cartItem.product.id %}" hx-get="{% url 'delete_card' cartItem.product.id %}" hx-target="#cart-products"><i class="bi bi-trash"><button disabled style="background-color: rgba(121,121,121,0);display: none" type="button"></button></i></a>
                </li>
            {% endfor %}

            </ul>
            <div class="totals">
                <div class="subtotal">
                    <span class="label">Цена:</span> <span class="amount">{{ cartUser.total_price }}₸</span>
                </div>
            </div>
            <div class="action-buttons">
                <a  href="{% url 'Order_check' %}" class="btn btn-success">Оформление заказа</a>
            </div>
        </div>
    </div>






    <main class="container" id="container">

    <section>{% block banner %}{% endblock %}</section>


        <section>{% block content %}{% endblock %}</section>
    </main>


</body>
<style>
    @font-face {
    font-family: 'Montserrat';
    src: url('{% static 'fonts/montserrat/static/Montserrat-Regular.ttf' %}');
    }

    @font-face {
    font-family: 'Montserrat-bold';
    src: url('{% static 'fonts/montserrat/static/Montserrat-Bold.ttf' %}');
    }
</style>
<script src="{% static '/bootstrap-5.3.3-dist/js/bootstrap.js' %}"></script>



</html>
